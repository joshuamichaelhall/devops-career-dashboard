{"ast":null,"code":"import React,{useState}from'react';import{useDashboard}from'../context/DashboardContext';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const SkillsForm=_ref=>{var _dashboardData$skills,_categoryData$skills;let{category,onClose}=_ref;const{dashboardData,refreshData}=useDashboard();const[skillName,setSkillName]=useState('');const[proficiency,setProficiency]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const[error,setError]=useState('');// Find the existing category\nconst categoryData=dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$skills=dashboardData.skills)===null||_dashboardData$skills===void 0?void 0:_dashboardData$skills.find(c=>c.category===category);const initialProficiency=(categoryData===null||categoryData===void 0?void 0:categoryData.proficiency)||'Not Started';// Set initial proficiency when component mounts\nuseState(()=>{setProficiency(initialProficiency);},[initialProficiency]);const proficiencyLevels=['Not Started','Beginner','Intermediate','Advanced','Expert'];const handleAddSkill=async e=>{e.preventDefault();if(!skillName.trim()){setError('Skill name is required');return;}try{setIsSubmitting(true);setError('');// Find the category index\nconst categoryIndex=dashboardData.skills.findIndex(c=>c.category===category);if(categoryIndex===-1){setError(\"Category \\\"\".concat(category,\"\\\" not found\"));return;}// Update skills data\nconst updatedSkills=[...dashboardData.skills];// Add the new skill if it doesn't exist\nif(!updatedSkills[categoryIndex].skills.includes(skillName)){updatedSkills[categoryIndex].skills.push(skillName);}// Update proficiency if changed\nif(proficiency!==updatedSkills[categoryIndex].proficiency){updatedSkills[categoryIndex].proficiency=proficiency;}// Update backend via API\nconst response=await fetch('http://localhost:3001/api/data/skills',{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify(updatedSkills)});if(!response.ok){throw new Error('Failed to update skills');}// Clear form\nsetSkillName('');// Refresh data to update UI\nawait refreshData();if(onClose){onClose();}}catch(err){console.error('Error updating skills:',err);setError('Failed to update skills. Please try again.');}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold mb-2\",children:[\"Update Skills: \",category]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddSkill,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Add New Skill\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:skillName,onChange:e=>setSkillName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter skill name\",disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Proficiency Level\"}),/*#__PURE__*/_jsx(\"select\",{value:proficiency,onChange:e=>setProficiency(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",disabled:isSubmitting,children:proficiencyLevels.map(level=>/*#__PURE__*/_jsx(\"option\",{value:level,children:level},level))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2\",children:[onClose&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",disabled:isSubmitting,children:isSubmitting?'Adding...':'Add Skill'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-sm mb-2\",children:\"Current Skills:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc pl-5 text-sm space-y-1\",children:[categoryData===null||categoryData===void 0?void 0:(_categoryData$skills=categoryData.skills)===null||_categoryData$skills===void 0?void 0:_categoryData$skills.map((skill,index)=>/*#__PURE__*/_jsx(\"li\",{children:skill},index)),(!(categoryData!==null&&categoryData!==void 0&&categoryData.skills)||categoryData.skills.length===0)&&/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-500 italic\",children:\"No skills yet\"})]})]})]});};export default SkillsForm;","map":{"version":3,"names":["React","useState","useDashboard","jsxs","_jsxs","jsx","_jsx","SkillsForm","_ref","_dashboardData$skills","_categoryData$skills","category","onClose","dashboardData","refreshData","skillName","setSkillName","proficiency","setProficiency","isSubmitting","setIsSubmitting","error","setError","categoryData","skills","find","c","initialProficiency","proficiencyLevels","handleAddSkill","e","preventDefault","trim","categoryIndex","findIndex","concat","updatedSkills","includes","push","response","fetch","method","headers","body","JSON","stringify","ok","Error","err","console","className","children","onSubmit","type","value","onChange","target","placeholder","disabled","map","level","onClick","skill","index","length"],"sources":["/Users/jmh/repos_software/devops-career-dashboard/dashboard/src/components/SkillsForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDashboard } from '../context/DashboardContext';\n\nconst SkillsForm = ({ category, onClose }) => {\n  const { dashboardData, refreshData } = useDashboard();\n  const [skillName, setSkillName] = useState('');\n  const [proficiency, setProficiency] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  \n  // Find the existing category\n  const categoryData = dashboardData?.skills?.find(c => c.category === category);\n  const initialProficiency = categoryData?.proficiency || 'Not Started';\n  \n  // Set initial proficiency when component mounts\n  useState(() => {\n    setProficiency(initialProficiency);\n  }, [initialProficiency]);\n  \n  const proficiencyLevels = [\n    'Not Started',\n    'Beginner',\n    'Intermediate',\n    'Advanced',\n    'Expert'\n  ];\n  \n  const handleAddSkill = async (e) => {\n    e.preventDefault();\n    \n    if (!skillName.trim()) {\n      setError('Skill name is required');\n      return;\n    }\n    \n    try {\n      setIsSubmitting(true);\n      setError('');\n      \n      // Find the category index\n      const categoryIndex = dashboardData.skills.findIndex(c => c.category === category);\n      \n      if (categoryIndex === -1) {\n        setError(`Category \"${category}\" not found`);\n        return;\n      }\n      \n      // Update skills data\n      const updatedSkills = [...dashboardData.skills];\n      \n      // Add the new skill if it doesn't exist\n      if (!updatedSkills[categoryIndex].skills.includes(skillName)) {\n        updatedSkills[categoryIndex].skills.push(skillName);\n      }\n      \n      // Update proficiency if changed\n      if (proficiency !== updatedSkills[categoryIndex].proficiency) {\n        updatedSkills[categoryIndex].proficiency = proficiency;\n      }\n      \n      // Update backend via API\n      const response = await fetch('http://localhost:3001/api/data/skills', {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updatedSkills),\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to update skills');\n      }\n      \n      // Clear form\n      setSkillName('');\n      \n      // Refresh data to update UI\n      await refreshData();\n      \n      if (onClose) {\n        onClose();\n      }\n    } catch (err) {\n      console.error('Error updating skills:', err);\n      setError('Failed to update skills. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-4 mb-4\">\n      <h3 className=\"text-lg font-bold mb-2\">Update Skills: {category}</h3>\n      \n      {error && (\n        <div className=\"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm\">\n          {error}\n        </div>\n      )}\n      \n      <form onSubmit={handleAddSkill}>\n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Add New Skill\n          </label>\n          <input\n            type=\"text\"\n            value={skillName}\n            onChange={(e) => setSkillName(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            placeholder=\"Enter skill name\"\n            disabled={isSubmitting}\n          />\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Proficiency Level\n          </label>\n          <select\n            value={proficiency}\n            onChange={(e) => setProficiency(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            disabled={isSubmitting}\n          >\n            {proficiencyLevels.map((level) => (\n              <option key={level} value={level}>\n                {level}\n              </option>\n            ))}\n          </select>\n        </div>\n        \n        <div className=\"flex justify-end space-x-2\">\n          {onClose && (\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              disabled={isSubmitting}\n            >\n              Cancel\n            </button>\n          )}\n          \n          <button\n            type=\"submit\"\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Adding...' : 'Add Skill'}\n          </button>\n        </div>\n      </form>\n      \n      <div className=\"mt-4\">\n        <h4 className=\"font-medium text-sm mb-2\">Current Skills:</h4>\n        <ul className=\"list-disc pl-5 text-sm space-y-1\">\n          {categoryData?.skills?.map((skill, index) => (\n            <li key={index}>{skill}</li>\n          ))}\n          {(!categoryData?.skills || categoryData.skills.length === 0) && (\n            <li className=\"text-gray-500 italic\">No skills yet</li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default SkillsForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}