{"ast":null,"code":"import React,{useState}from'react';import{useDashboard}from'../context/DashboardContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddSkillForm=_ref=>{var _dashboardData$skills;let{onClose}=_ref;const{dashboardData,updateSkills}=useDashboard();const[categoryName,setCategoryName]=useState('');const[newCategory,setNewCategory]=useState('');const[skillName,setSkillName]=useState('');const[proficiency,setProficiency]=useState('Beginner');const[isSubmitting,setIsSubmitting]=useState(false);const[error,setError]=useState('');const[isAddingCategory,setIsAddingCategory]=useState(false);// Get existing categories\nconst categories=(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$skills=dashboardData.skills)===null||_dashboardData$skills===void 0?void 0:_dashboardData$skills.map(c=>c.category))||[];const proficiencyLevels=['Not Started','Beginner','Intermediate','Advanced','Expert'];const handleSubmit=async e=>{e.preventDefault();// Determine which category to use\nconst finalCategory=isAddingCategory?newCategory:categoryName;if(!finalCategory){setError('Category is required');return;}if(!skillName.trim()){setError('Skill name is required');return;}try{setIsSubmitting(true);setError('');if(isAddingCategory){// Create new category first\nconst updatedSkills=[...dashboardData.skills,{category:newCategory,skills:[skillName],proficiency}];// Update via API\nawait fetch('http://localhost:3001/api/data/skills',{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify(updatedSkills)});}else{// Add to existing category\nawait updateSkills(categoryName,skillName,proficiency);}// Reset form and close\nsetSkillName('');setNewCategory('');setProficiency('Beginner');if(onClose){onClose();}}catch(err){console.error('Error adding skill:',err);setError('Failed to add skill. Please try again.');}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mb-4\",children:\"Add New Skill\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isAddingCategory,onChange:e=>setIsAddingCategory(e.target.checked),className:\"mr-2\"}),\"Add New Category\"]}),isAddingCategory?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCategory,onChange:e=>setNewCategory(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter new category name\",disabled:isSubmitting}):/*#__PURE__*/_jsxs(\"select\",{value:categoryName,onChange:e=>setCategoryName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},cat))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Skill Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:skillName,onChange:e=>setSkillName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter skill name\",disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Proficiency Level\"}),/*#__PURE__*/_jsx(\"select\",{value:proficiency,onChange:e=>setProficiency(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",disabled:isSubmitting,children:proficiencyLevels.map(level=>/*#__PURE__*/_jsx(\"option\",{value:level,children:level},level))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2\",children:[onClose&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",disabled:isSubmitting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",disabled:isSubmitting,children:isSubmitting?'Adding...':'Add Skill'})]})]})]});};export default AddSkillForm;","map":{"version":3,"names":["React","useState","useDashboard","jsx","_jsx","jsxs","_jsxs","AddSkillForm","_ref","_dashboardData$skills","onClose","dashboardData","updateSkills","categoryName","setCategoryName","newCategory","setNewCategory","skillName","setSkillName","proficiency","setProficiency","isSubmitting","setIsSubmitting","error","setError","isAddingCategory","setIsAddingCategory","categories","skills","map","c","category","proficiencyLevels","handleSubmit","e","preventDefault","finalCategory","trim","updatedSkills","fetch","method","headers","body","JSON","stringify","err","console","className","children","onSubmit","type","checked","onChange","target","value","placeholder","disabled","cat","level","onClick"],"sources":["/Users/jmh/repos_software/devops-career-dashboard/dashboard/src/components/AddSkillForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDashboard } from '../context/DashboardContext';\n\nconst AddSkillForm = ({ onClose }) => {\n  const { dashboardData, updateSkills } = useDashboard();\n  const [categoryName, setCategoryName] = useState('');\n  const [newCategory, setNewCategory] = useState('');\n  const [skillName, setSkillName] = useState('');\n  const [proficiency, setProficiency] = useState('Beginner');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [isAddingCategory, setIsAddingCategory] = useState(false);\n  \n  // Get existing categories\n  const categories = dashboardData?.skills?.map(c => c.category) || [];\n  \n  const proficiencyLevels = [\n    'Not Started',\n    'Beginner',\n    'Intermediate',\n    'Advanced',\n    'Expert'\n  ];\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Determine which category to use\n    const finalCategory = isAddingCategory ? newCategory : categoryName;\n    \n    if (!finalCategory) {\n      setError('Category is required');\n      return;\n    }\n    \n    if (!skillName.trim()) {\n      setError('Skill name is required');\n      return;\n    }\n    \n    try {\n      setIsSubmitting(true);\n      setError('');\n      \n      if (isAddingCategory) {\n        // Create new category first\n        const updatedSkills = [...dashboardData.skills, {\n          category: newCategory,\n          skills: [skillName],\n          proficiency\n        }];\n        \n        // Update via API\n        await fetch('http://localhost:3001/api/data/skills', {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(updatedSkills),\n        });\n      } else {\n        // Add to existing category\n        await updateSkills(categoryName, skillName, proficiency);\n      }\n      \n      // Reset form and close\n      setSkillName('');\n      setNewCategory('');\n      setProficiency('Beginner');\n      \n      if (onClose) {\n        onClose();\n      }\n    } catch (err) {\n      console.error('Error adding skill:', err);\n      setError('Failed to add skill. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-4\">\n      <h3 className=\"text-lg font-bold mb-4\">Add New Skill</h3>\n      \n      {error && (\n        <div className=\"bg-red-100 text-red-700 p-2 rounded mb-4 text-sm\">\n          {error}\n        </div>\n      )}\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label className=\"flex items-center text-sm font-medium text-gray-700 mb-1\">\n            <input\n              type=\"checkbox\"\n              checked={isAddingCategory}\n              onChange={(e) => setIsAddingCategory(e.target.checked)}\n              className=\"mr-2\"\n            />\n            Add New Category\n          </label>\n          \n          {isAddingCategory ? (\n            <input\n              type=\"text\"\n              value={newCategory}\n              onChange={(e) => setNewCategory(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Enter new category name\"\n              disabled={isSubmitting}\n            />\n          ) : (\n            <select\n              value={categoryName}\n              onChange={(e) => setCategoryName(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n              disabled={isSubmitting}\n            >\n              <option value=\"\">Select a category</option>\n              {categories.map((cat) => (\n                <option key={cat} value={cat}>\n                  {cat}\n                </option>\n              ))}\n            </select>\n          )}\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Skill Name\n          </label>\n          <input\n            type=\"text\"\n            value={skillName}\n            onChange={(e) => setSkillName(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            placeholder=\"Enter skill name\"\n            disabled={isSubmitting}\n          />\n        </div>\n        \n        <div className=\"mb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Proficiency Level\n          </label>\n          <select\n            value={proficiency}\n            onChange={(e) => setProficiency(e.target.value)}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            disabled={isSubmitting}\n          >\n            {proficiencyLevels.map((level) => (\n              <option key={level} value={level}>\n                {level}\n              </option>\n            ))}\n          </select>\n        </div>\n        \n        <div className=\"flex justify-end space-x-2\">\n          {onClose && (\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              disabled={isSubmitting}\n            >\n              Cancel\n            </button>\n          )}\n          \n          <button\n            type=\"submit\"\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Adding...' : 'Add Skill'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default AddSkillForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}